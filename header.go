// This work is subject to the CC0 1.0 Universal (CC0 1.0) Public Domain Dedication
// license. Its contents can be found at:
// http://creativecommons.org/publicdomain/zero/1.0/

package bindata

import (
	"io"
	"os"
	"path/filepath"
	"text/template"
)

// writeHeader writes the file header.
func writeHeader(w io.Writer, c *Config, toc []binAsset) error {
	wd, err := os.Getwd()
	if err != nil {
		return err
	}

	return headerTemplate.Execute(w, struct {
		Config     *Config
		Assets     []binAsset
		WorkingDir string
	}{c, toc, wd})
}

var headerTemplate = template.Must(template.New("debug").Funcs(template.FuncMap{
	"relative": filepath.Rel,
	"toslash":  filepath.ToSlash,
}).Parse(`{{- /* This makes e.g. Github ignore diffs in generated files. */ -}}
// Code generated by go-bindata.
// sources:
{{range .Assets -}}
	// {{toslash (relative $.WorkingDir .Path)}}
{{end -}}
// DO NOT EDIT!

{{if $.Config.Tags -}}
// +build {{$.Config.Tags}}

{{end -}}

package {{$.Config.Package}}

`))
